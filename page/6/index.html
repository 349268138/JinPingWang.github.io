<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  




<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Quick notes" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Waiting for wind">
<meta property="og:type" content="website">
<meta property="og:title" content="Quick notes">
<meta property="og:url" content="http://jinpingwang.github.io/page/6/index.html">
<meta property="og:site_name" content="Quick notes">
<meta property="og:description" content="Waiting for wind">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Quick notes">
<meta name="twitter:description" content="Waiting for wind">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Quick notes </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Quick notes</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">等风来</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'Aq7px34mBsH6UhwK43yW','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/15/leetcodeDatabase/CustomersWhoNeverOrder/" itemprop="url">
                  Customers Who Never Order
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-15T22:11:35+08:00" content="2015-05-15">
              2015-05-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/15/leetcodeDatabase/CustomersWhoNeverOrder/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/15/leetcodeDatabase/CustomersWhoNeverOrder/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>Suppose that a website contains two tables, the Customers table and the Orders table. Write a SQL query to find all customers who never order anything.<br>Table: Customers.<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----+</span>-------+</span><br><span class="line"><span class="header">| Id | Name  |</span><br><span class="line">+----+-------+</span></span><br><span class="line">| 1  | Joe   |</span><br><span class="line">| 2  | Henry |</span><br><span class="line">| 3  | Sam   |</span><br><span class="line"><span class="header">| 4  | Max   |</span><br><span class="line">+----+-------+</span></span><br></pre></td></tr></table></figure></p>
<p>Table: Orders.<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----+</span>------------+</span><br><span class="line"><span class="header">| Id | CustomerId |</span><br><span class="line">+----+------------+</span></span><br><span class="line">| 1  | 3          |</span><br><span class="line"><span class="header">| 2  | 1          |</span><br><span class="line">+----+------------+</span></span><br></pre></td></tr></table></figure></p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/15/leetcodeDatabase/CustomersWhoNeverOrder/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/15/leetcodeDatabase/DuplicateEmails/" itemprop="url">
                  Duplicate Emails
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-15T16:08:16+08:00" content="2015-05-15">
              2015-05-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/15/leetcodeDatabase/DuplicateEmails/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/15/leetcodeDatabase/DuplicateEmails/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>Write a SQL query to find all duplicate emails in a table named Person.<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----+</span>---------+</span><br><span class="line"><span class="header">| Id | Email   |</span><br><span class="line">+----+---------+</span></span><br><span class="line">| 1  | a@b.com |</span><br><span class="line">| 2  | c@d.com |</span><br><span class="line"><span class="header">| 3  | a@b.com |</span><br><span class="line">+----+---------+</span></span><br></pre></td></tr></table></figure></p>
<p>For example, your query should return the following for the above table:<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+---------+</span></span><br><span class="line"><span class="header">| Email   |</span><br><span class="line">+---------+</span></span><br><span class="line"><span class="header">| a@b.com |</span><br><span class="line">+---------+</span></span><br></pre></td></tr></table></figure></p>
<h3 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">select</span> Email</span><br><span class="line"><span class="keyword">from</span> Person</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> Email</span><br><span class="line"><span class="keyword">having</span> <span class="keyword">count</span>(Email) &gt; <span class="number">1</span></span></span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/15/leetcodeDatabase/DuplicateEmails/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/15/leetcodeDatabase/EmployeesEarningMoreThanTheirManagers/" itemprop="url">
                  Employees Earning More Than Their Managers
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-15T14:12:38+08:00" content="2015-05-15">
              2015-05-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/15/leetcodeDatabase/EmployeesEarningMoreThanTheirManagers/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/15/leetcodeDatabase/EmployeesEarningMoreThanTheirManagers/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>The Employee table holds all employees including their managers. Every employee has an Id, and there is also a column for the manager Id.<br><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+----+-------+--------+-----------+</span><br><span class="line">|<span class="string"> Id </span>|<span class="string"> Name  </span>|<span class="string"> Salary </span>|<span class="string"> ManagerId </span>|</span><br><span class="line">+----+-------+--------+-----------+</span><br><span class="line">|<span class="string"> 1  </span>|<span class="string"> Joe   </span>|<span class="string"> 70000  </span>|<span class="string"> 3         </span>|</span><br><span class="line">|<span class="string"> 2  </span>|<span class="string"> Henry </span>|<span class="string"> 80000  </span>|<span class="string"> 4         </span>|</span><br><span class="line">|<span class="string"> 3  </span>|<span class="string"> Sam   </span>|<span class="string"> 60000  </span>|<span class="string"> NULL      </span>|</span><br><span class="line">|<span class="string"> 4  </span>|<span class="string"> Max   </span>|<span class="string"> 90000  </span>|<span class="string"> NULL      </span>|</span><br><span class="line">+----+-------+--------+-----------+</span><br></pre></td></tr></table></figure></p>
<p>Given the Employee table, write a SQL query that finds out employees who earn more than their managers. For the above table, Joe is the only employee who earns more than his manager.<br><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="code">+----------+</span></span><br><span class="line"><span class="header">| Employee |</span><br><span class="line">+----------+</span></span><br><span class="line"><span class="header">| Joe      |</span><br><span class="line">+----------+</span></span><br></pre></td></tr></table></figure></p>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/15/leetcodeDatabase/EmployeesEarningMoreThanTheirManagers/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/15/leetcode/RectangleArea/" itemprop="url">
                  Rectangle Area
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-15T09:38:15+08:00" content="2015-05-15">
              2015-05-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/15/leetcode/RectangleArea/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/15/leetcode/RectangleArea/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>Find the total area covered by two rectilinear rectangles in a 2D plane.<br>Each rectangle is defined by its bottom left corner and top right corner as shown in the figure.<br><img src="https://leetcode.com/static/images/problemset/rectangle_area.png" alt="cmd-markdown-logo"><br>Assume that the total area is never beyond the maximum possible value of int.</p>
<h3 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h3><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">public class Solution &#123;</span><br><span class="line">    public <span class="keyword">int</span> computeArea(<span class="keyword">int</span> A, <span class="keyword">int</span> B, <span class="keyword">int</span> C, <span class="keyword">int</span> D, <span class="keyword">int</span> E, <span class="keyword">int</span> F, <span class="keyword">int</span> G, <span class="keyword">int</span> H) &#123;</span><br><span class="line">        <span class="keyword">if</span>(A &gt; E)&#123;</span><br><span class="line">            <span class="keyword">int</span> temp = A;</span><br><span class="line">            A = E;</span><br><span class="line">            E = temp;</span><br><span class="line">            </span><br><span class="line">            temp = B;</span><br><span class="line">            B = F;</span><br><span class="line">            F = temp;</span><br><span class="line">            </span><br><span class="line">            temp = C;</span><br><span class="line">            C = G;</span><br><span class="line">            G = temp;</span><br><span class="line">            </span><br><span class="line">            temp = D;</span><br><span class="line">            D = H;</span><br><span class="line">            H = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> s1 = (C-A)*(D-B);</span><br><span class="line">        <span class="keyword">int</span> s2 = (G-E)*(H-F);</span><br><span class="line">        <span class="keyword">int</span> sum = s1 + s2;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(H &lt;= B || F &gt;= D || E &gt;= C)&#123;</span><br><span class="line">            <span class="keyword">return</span> sum;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">int</span> <span class="sub"><span class="keyword">sub</span> = 0;</span></span><br><span class="line">            <span class="keyword">if</span>(F&lt;=B &amp;&amp; H&lt;D)&#123;</span><br><span class="line">                <span class="keyword">if</span>(G&gt;C)&#123;</span><br><span class="line">                    <span class="sub"><span class="keyword">sub</span> = (C-E)*Math.abs(H-B);</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="sub"><span class="keyword">sub</span> = (G-E)*Math.abs(H-B);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(F&gt;B &amp;&amp; H&gt;D)&#123;</span><br><span class="line">                <span class="keyword">if</span>(G&gt;C)&#123;</span><br><span class="line">                    <span class="sub"><span class="keyword">sub</span> = (C-E)*Math.abs(D-F);</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="sub"><span class="keyword">sub</span> = (G-E)*Math.abs(D-F);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(F&gt;B &amp;&amp; H&lt;=D) &#123;</span><br><span class="line">                <span class="keyword">if</span>(G&gt;C)&#123;</span><br><span class="line">                    <span class="sub"><span class="keyword">sub</span> = (C-E)*(H-F);</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="sub"><span class="keyword">sub</span> = (G-E)*(H-F);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(G&gt;C)&#123;</span><br><span class="line">                    <span class="sub"><span class="keyword">sub</span> = (C-E)*(D-B);</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="sub"><span class="keyword">sub</span> = (G-E)*(D-B);</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> sum - <span class="sub"><span class="keyword">sub</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/15/leetcode/RectangleArea/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/14/leetcode/ContainsDuplicateII/" itemprop="url">
                  Contains Duplicate II
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-14T23:59:03+08:00" content="2015-05-14">
              2015-05-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/14/leetcode/ContainsDuplicateII/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/14/leetcode/ContainsDuplicateII/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>Given an array of integers and an integer k, find out whether there are two distinct indices i and j in the array such that nums[i] = nums[j] and the difference between i and j is at most k.</p>
<h3 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h3><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class Solution &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">boolean</span> containsNearbyDuplicate(<span class="built_in">int</span>[] nums, <span class="built_in">int</span> k) &#123;</span><br><span class="line">        <span class="keyword">HashMap</span>&lt;Integer, Integer&gt; hashMap = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;Integer, Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> <span class="built_in">loop</span>=<span class="number">0</span>; <span class="built_in">loop</span>&lt;nums.length; <span class="built_in">loop</span>++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(hashMap.containsKey(nums[<span class="built_in">loop</span>]))&#123;</span><br><span class="line">                <span class="keyword">if</span>(<span class="built_in">loop</span> - hashMap.<span class="built_in">get</span>(nums[<span class="built_in">loop</span>]) &lt;= k)&#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    hashMap.put(nums[<span class="built_in">loop</span>], <span class="built_in">loop</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                hashMap.put(nums[<span class="built_in">loop</span>], <span class="built_in">loop</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/14/leetcode/ContainsDuplicateII/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/14/leetcode/ContainsDuplicate/" itemprop="url">
                  Contains Duplicate
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-14T22:36:28+08:00" content="2015-05-14">
              2015-05-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/14/leetcode/ContainsDuplicate/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/14/leetcode/ContainsDuplicate/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>Given an array of integers, find if the array contains any duplicates. Your function should return true if any value appears at least twice in the array, and it should return false if every element is distinct.</p>
<h3 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h3><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">containsDuplicate</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">         Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;Integer&gt;();</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">int</span> i : nums)</span><br><span class="line">             <span class="keyword">if</span>(!set.add(i))// <span class="keyword">if</span> there is same</span><br><span class="line">                 <span class="keyword">return</span> <span class="keyword">true</span>; </span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/14/leetcode/ContainsDuplicate/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/14/leetcodeDatabase/ConsecutiveNumbers/" itemprop="url">
                  Consecutive Numbers
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-14T19:08:36+08:00" content="2015-05-14">
              2015-05-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/14/leetcodeDatabase/ConsecutiveNumbers/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/14/leetcodeDatabase/ConsecutiveNumbers/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>Write a SQL query to find all numbers that appear at least three times consecutively.<br><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+----+-----+</span><br><span class="line">|<span class="string"> Id </span>|<span class="string"> Num </span>|</span><br><span class="line">+----+-----+</span><br><span class="line">|<span class="string"> 1  </span>|<span class="string">  1  </span>|</span><br><span class="line">|<span class="string"> 2  </span>|<span class="string">  1  </span>|</span><br><span class="line">|<span class="string"> 3  </span>|<span class="string">  1  </span>|</span><br><span class="line">|<span class="string"> 4  </span>|<span class="string">  2  </span>|</span><br><span class="line">|<span class="string"> 5  </span>|<span class="string">  1  </span>|</span><br><span class="line">|<span class="string"> 6  </span>|<span class="string">  2  </span>|</span><br><span class="line">|<span class="string"> 7  </span>|<span class="string">  2  </span>|</span><br><span class="line">+----+-----+</span><br></pre></td></tr></table></figure></p>
<h4 id="example"><a href="#example" class="headerlink" title="example"></a>example</h4><p>given the above Logs table, 1 is the only number that appears consecutively for at least three times.</p>
<h3 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">select</span> <span class="keyword">distinct</span>(Logs1.<span class="keyword">Num</span>) <span class="keyword">as</span> ConsecutiveNums</span><br><span class="line"><span class="keyword">from</span> <span class="keyword">Logs</span> Logs1, <span class="keyword">Logs</span> Logs2, <span class="keyword">Logs</span> Logs3</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">Logs1.<span class="keyword">Id</span> = Logs2.<span class="keyword">Id</span>-<span class="number">1</span> <span class="keyword">and</span> Logs2.<span class="keyword">Id</span> = Logs3.<span class="keyword">Id</span> -<span class="number">1</span> <span class="keyword">and</span> Logs1.<span class="keyword">Num</span> = Logs2.<span class="keyword">Num</span> <span class="keyword">and</span> Logs2.<span class="keyword">Num</span> = Logs3.<span class="keyword">Num</span>;</span></span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/14/leetcodeDatabase/ConsecutiveNumbers/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/14/leetcode/ReverseLinkedList/" itemprop="url">
                  Reverse Linked List
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-14T16:05:46+08:00" content="2015-05-14">
              2015-05-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/14/leetcode/ReverseLinkedList/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/14/leetcode/ReverseLinkedList/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>Reverse a singly linked list.</p>
<h3 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h3><figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Definition <span class="keyword">for</span> singly-linked list.</span><br><span class="line"> * <span class="keyword">public</span> <span class="keyword">class</span> ListNode &#123;</span><br><span class="line"> *     <span class="built_in">int</span> val;</span><br><span class="line"> *     ListNode <span class="keyword">next</span>;</span><br><span class="line"> *     ListNode(<span class="built_in">int</span> x) &#123; val = x; &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> ReverseLinkedListSolution &#123;</span><br><span class="line">    <span class="keyword">public</span> ListNode reverseList(ListNode head) &#123;</span><br><span class="line">        ListNode start = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode temp = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">while</span>(head != <span class="literal">null</span>)&#123;</span><br><span class="line">            temp = head;</span><br><span class="line">            head = head.<span class="keyword">next</span>;</span><br><span class="line">            </span><br><span class="line">            temp.<span class="keyword">next</span> = start.<span class="keyword">next</span>;</span><br><span class="line">            start.<span class="keyword">next</span> = temp;</span><br><span class="line">        &#125;</span><br><span class="line">        return start.<span class="keyword">next</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/14/leetcode/ReverseLinkedList/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/14/leetcode/IsomorphicStrings/" itemprop="url">
                  Isomorphic Strings
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-14T14:38:17+08:00" content="2015-05-14">
              2015-05-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/14/leetcode/IsomorphicStrings/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/14/leetcode/IsomorphicStrings/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>Given two strings s and t, determine if they are isomorphic.<br>Two strings are isomorphic if the characters in s can be replaced to get t.<br>All occurrences of a character must be replaced with another character while preserving the order of characters. No two characters may map to the same character but a character may map to itself.</p>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Given <span class="string">"egg"</span>, <span class="string">"add"</span>, <span class="keyword">return</span> <span class="literal">true</span>.</span><br><span class="line">Given <span class="string">"foo"</span>, <span class="string">"bar"</span>, <span class="keyword">return</span> <span class="literal">false</span>.</span><br><span class="line">Given <span class="string">"paper"</span>, <span class="string">"title"</span>, <span class="keyword">return</span> <span class="literal">true</span>.</span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/14/leetcode/IsomorphicStrings/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/14/leetcode/CountPrimes/" itemprop="url">
                  Count Primes
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-14T12:10:38+08:00" content="2015-05-14">
              2015-05-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/14/leetcode/CountPrimes/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/14/leetcode/CountPrimes/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>Count the number of prime numbers less than a non-negative number, n.</p>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">n=<span class="number">2</span>，则返回<span class="number">0</span></span><br><span class="line">n=<span class="number">3</span>，则返回<span class="number">1</span></span><br><span class="line">n=<span class="number">6</span>，则返回<span class="number">3</span></span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/14/leetcode/CountPrimes/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/14/interview/关系型数据库范式/" itemprop="url">
                  关系型数据库范式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-14T09:13:48+08:00" content="2015-05-14">
              2015-05-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/面试/" itemprop="url" rel="index">
                    <span itemprop="name">面试</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/14/interview/关系型数据库范式/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/14/interview/关系型数据库范式/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="u60C5_u666F"><a href="#u60C5_u666F" class="headerlink" title="情景"></a>情景</h3><h4 id="u5173_u7CFB_u6A21_u5F0FSCD"><a href="#u5173_u7CFB_u6A21_u5F0FSCD" class="headerlink" title="关系模式SCD"></a>关系模式SCD</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//(SNo, CNo)为主键</span></span><br><span class="line"><span class="function"><span class="title">SCD</span><span class="params">(SNo, SN, Age, Dept, MN, CNo, Score)</span></span></span><br></pre></td></tr></table></figure>
<h4 id="u5404_u5217_u542B_u4E49"><a href="#u5404_u5217_u542B_u4E49" class="headerlink" title="各列含义"></a>各列含义</h4><table>
<thead>
<tr>
<th style="text-align:center">列名</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">SNo</td>
<td style="text-align:center">学号</td>
</tr>
<tr>
<td style="text-align:center">SN</td>
<td style="text-align:center">姓名</td>
</tr>
<tr>
<td style="text-align:center">Age</td>
<td style="text-align:center">年龄</td>
</tr>
<tr>
<td style="text-align:center">Dept</td>
<td style="text-align:center">系别</td>
</tr>
<tr>
<td style="text-align:center">MN</td>
<td style="text-align:center">系主任姓名</td>
</tr>
<tr>
<td style="text-align:center">CNo</td>
<td style="text-align:center">课程号</td>
</tr>
<tr>
<td style="text-align:center">Score</td>
<td style="text-align:center">成绩</td>
</tr>
</tbody>
</table>
<h4 id="u8BED_u4E49_u89C4_u5B9A"><a href="#u8BED_u4E49_u89C4_u5B9A" class="headerlink" title="语义规定"></a>语义规定</h4><p>1：一个系有若干学生，但一个学生只属于一个系<br>2：一个系只有一名系主任，但一个系主任可以同时兼几个系的系主任<br>3：一个学生可以选修多门功课，每门课程可以被若干学生选修<br>4：每个学生学习的课程有一个成绩</p>
<h4 id="u5B58_u5728_u9690_u60A3"><a href="#u5B58_u5728_u9690_u60A3" class="headerlink" title="存在隐患"></a>存在隐患</h4><h5 id="u6570_u636E_u5197_u4F59"><a href="#u6570_u636E_u5197_u4F59" class="headerlink" title="数据冗余"></a>数据冗余</h5><p>系名，系主任，姓名，年龄重复存储多次</p>
<h5 id="u63D2_u5165_u5F02_u5E38"><a href="#u63D2_u5165_u5F02_u5E38" class="headerlink" title="插入异常"></a>插入异常</h5><p>某个新系没有招生，则系别与系主任信息无法输入到SCD中，因为SCD的主键为(SNo, CNo)，但是因为没有学生，则只能为空，可主键不能为空，因此会有插入异常。</p>
<h5 id="u5220_u9664_u5F02_u5E38"><a href="#u5220_u9664_u5F02_u5E38" class="headerlink" title="删除异常"></a>删除异常</h5><p>某个系的所有学生毕业了而没有招生时，删除学生信息，也就把系别与系主任给删了，然而这个系别与系主任是存在的。<br>如果某个学生不再选修某个课程CNo1时，本应该只删除Cno1，然而删除的同时也将学生信息给删除了（如果这个学生只选了这一门课）。</p>
<h5 id="u66F4_u65B0_u5F02_u5E38"><a href="#u66F4_u65B0_u5F02_u5E38" class="headerlink" title="更新异常"></a>更新异常</h5><p>如果某个学生改名，则有关该学生的所有记录都要逐一修改SN的值；同理某个系别的主任换届时，则这个系的学生记录都要修改MN的值。</p>
<h3 id="u51FD_u6570_u4F9D_u8D56"><a href="#u51FD_u6570_u4F9D_u8D56" class="headerlink" title="函数依赖"></a>函数依赖</h3><h4 id="u51FD_u6570_u4F9D_u8D56_u5B9A_u4E49"><a href="#u51FD_u6570_u4F9D_u8D56_u5B9A_u4E49" class="headerlink" title="函数依赖定义"></a>函数依赖定义</h4><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">U</span>=&#123;<span class="type">SNo</span>, <span class="type">SN</span>, <span class="type">Age</span>, <span class="type">Dept</span>, <span class="type">MN</span>, <span class="type">CNo</span>, <span class="type">Score</span>&#125;</span><br><span class="line"><span class="type">F</span>=&#123;<span class="type">SNo</span>-&gt;<span class="type">SN</span>, <span class="type">SNo</span>-&gt;<span class="type">Age</span>, <span class="type">SNo</span>-&gt;<span class="type">Dept</span>, (<span class="type">SNo</span>, <span class="type">CNo</span>)-&gt;<span class="type">Score</span>&#125;</span><br></pre></td></tr></table></figure>
<p>设关系模式R(U, F)，U是属性全集，F是U上的函数依赖集，X和Y是U的子集，如果对于R(U)的任意一个可能关系r，对于X的每一个具体值，Y都有唯一的具体值与之对应，则称X决定函数Y，或函数Y依赖于X，记做X-&gt;Y。<br>例：一个SNo有多个Score的值与其对应，因此Score不能唯一地确定，即Score不能函数依赖于SNo。</p>
<h4 id="u51FD_u6570_u4F9D_u8D56_u7EC6_u5206"><a href="#u51FD_u6570_u4F9D_u8D56_u7EC6_u5206" class="headerlink" title="函数依赖细分"></a>函数依赖细分</h4><h5 id="u5B8C_u5168_u51FD_u6570_u4F9D_u8D56"><a href="#u5B8C_u5168_u51FD_u6570_u4F9D_u8D56" class="headerlink" title="完全函数依赖"></a>完全函数依赖</h5><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">U</span>=&#123;<span class="type">SNo</span>, <span class="type">SN</span>, <span class="type">Age</span>, <span class="type">Dept</span>, <span class="type">MN</span>, <span class="type">CNo</span>, <span class="type">Score</span>&#125;</span><br><span class="line"><span class="type">F</span>=&#123;<span class="type">SNo</span>-&gt;<span class="type">SN</span>, <span class="type">SNo</span>-&gt;<span class="type">Age</span>, <span class="type">SNo</span>-&gt;<span class="type">Dept</span>, (<span class="type">SNo</span>, <span class="type">CNo</span>)-&gt;<span class="type">Score</span>&#125;</span><br></pre></td></tr></table></figure>
<p>设有关系模式R(U)，U是属性全集，X和Y是U的子集，如果X-&gt;Y，并且对于X的任何一个真字集X`，都有Y不函数依赖于X`，则称Y完全函数依赖于X。<br>例：Score完全函数依赖于(SNo, CNo)</p>
<h5 id="u90E8_u5206_u51FD_u6570_u4F9D_u8D56"><a href="#u90E8_u5206_u51FD_u6570_u4F9D_u8D56" class="headerlink" title="部分函数依赖"></a>部分函数依赖</h5><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">U</span>=&#123;<span class="type">SNo</span>, <span class="type">SN</span>, <span class="type">Age</span>, <span class="type">Dept</span>, <span class="type">MN</span>, <span class="type">CNo</span>, <span class="type">Score</span>&#125;</span><br><span class="line"><span class="type">F</span>=&#123;<span class="type">SNo</span>-&gt;<span class="type">SN</span>, <span class="type">SNo</span>-&gt;<span class="type">Age</span>, <span class="type">SNo</span>-&gt;<span class="type">Dept</span>, (<span class="type">SNo</span>, <span class="type">CNo</span>)-&gt;<span class="type">Score</span>&#125;</span><br></pre></td></tr></table></figure>
<p>设有关系模式R(U)，U是属性全集，X和Y是U的子集，如果X-&gt;Y，并且对于X的某一个真字集X`，存在Y函数依赖于X`，则称Y部分函数依赖于X。<br>例：Age完全函数依赖于(SNo, CNo)</p>
<h5 id="u4F20_u9012_u51FD_u6570_u4F9D_u8D56"><a href="#u4F20_u9012_u51FD_u6570_u4F9D_u8D56" class="headerlink" title="传递函数依赖"></a>传递函数依赖</h5><figure class="highlight elm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">U</span>=&#123;<span class="type">SNo</span>, <span class="type">SN</span>, <span class="type">Age</span>, <span class="type">Dept</span>, <span class="type">MN</span>, <span class="type">CNo</span>, <span class="type">Score</span>&#125;</span><br><span class="line"><span class="type">F</span>=&#123;<span class="type">SNo</span>-&gt;<span class="type">SN</span>, <span class="type">SNo</span>-&gt;<span class="type">Age</span>, <span class="type">SNo</span>-&gt;<span class="type">Dept</span>, (<span class="type">SNo</span>, <span class="type">CNo</span>)-&gt;<span class="type">Score</span>&#125;</span><br></pre></td></tr></table></figure>
<p>设有关系模式R(U)，U是属性全集，X，Y，Z是U的子集，若X-&gt;Y（Y函数依赖于X），但X不函数依赖于Y，而Y-&gt;Z，则称Z对X传递函数依赖。<br>例：SNo-&gt;Dept，但SNo不函数依赖于Dept，而Dept-&gt;MN，则有MN对SNo传递函数依赖。</p>
<h3 id="u5173_u7CFB_u6A21_u5F0F_u7684_u8303_u5F0F"><a href="#u5173_u7CFB_u6A21_u5F0F_u7684_u8303_u5F0F" class="headerlink" title="关系模式的范式"></a>关系模式的范式</h3><h4 id="1NF"><a href="#1NF" class="headerlink" title="1NF"></a>1NF</h4><h5 id="u60C5_u666F-1"><a href="#u60C5_u666F-1" class="headerlink" title="情景"></a>情景</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">SCD</span><span class="params">(SNo, SN, Age, Dept, MN, CNo, Score)</span></span></span><br></pre></td></tr></table></figure>
<h5 id="u5B9A_u4E49"><a href="#u5B9A_u4E49" class="headerlink" title="定义"></a>定义</h5><p>关系模式R所有的属性均为简单属性，即每个属性都是不可再分的。</p>
<h5 id="u5B58_u5728_u9690_u60A3-1"><a href="#u5B58_u5728_u9690_u60A3-1" class="headerlink" title="存在隐患"></a>存在隐患</h5><p>数据冗余，插入异常，删除异常，更新异常</p>
<h4 id="2NF"><a href="#2NF" class="headerlink" title="2NF"></a>2NF</h4><h5 id="u60C5_u666F-2"><a href="#u60C5_u666F-2" class="headerlink" title="情景"></a>情景</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">SCD</span><span class="params">(SNo, SN, Age, Dept, MN, CNo, Score)</span></span></span><br><span class="line">由<span class="number">1</span>NF转换为<span class="number">2</span>NF</span><br><span class="line"><span class="function"><span class="title">SD</span><span class="params">(SNo, SN, Age, Dept, MN)</span></span></span><br><span class="line"><span class="function"><span class="title">SC</span><span class="params">(SNo, CNo, Score)</span></span></span><br></pre></td></tr></table></figure>
<h5 id="u5B9A_u4E49-1"><a href="#u5B9A_u4E49-1" class="headerlink" title="定义"></a>定义</h5><p>首先是满足1NF，且每个非主属性都完全函数依赖于R的主关系键。</p>
<h5 id="u5B58_u5728_u9690_u60A3-2"><a href="#u5B58_u5728_u9690_u60A3-2" class="headerlink" title="存在隐患"></a>存在隐患</h5><p>数据冗余，插入异常，删除异常，更新异常</p>
<h4 id="3NF"><a href="#3NF" class="headerlink" title="3NF"></a>3NF</h4><h5 id="u60C5_u666F-3"><a href="#u60C5_u666F-3" class="headerlink" title="情景"></a>情景</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">SD</span><span class="params">(SNo, SN, Age, Dept, MN)</span></span></span><br><span class="line"><span class="function"><span class="title">SC</span><span class="params">(SNo, CNo, Score)</span></span></span><br><span class="line">由<span class="number">2</span>NF转换为<span class="number">3</span>NF</span><br><span class="line"><span class="function"><span class="title">S</span><span class="params">(SNo, SN, Age, Dept)</span></span></span><br><span class="line"><span class="function"><span class="title">D</span><span class="params">(Dept, MN)</span></span></span><br><span class="line"><span class="function"><span class="title">SC</span><span class="params">(SNo, CNo, Score)</span></span></span><br></pre></td></tr></table></figure>
<h5 id="u5B9A_u4E49-2"><a href="#u5B9A_u4E49-2" class="headerlink" title="定义"></a>定义</h5><p>首先是满足2NF，且每个非主属性都不传递函数依赖于R的主关系键。</p>
<h5 id="u5B58_u5728_u9690_u60A3-3"><a href="#u5B58_u5728_u9690_u60A3-3" class="headerlink" title="存在隐患"></a>存在隐患</h5><p>数据冗余降低，不存在插入异常，不存在删除异常，不存在更新异常。</p>
<h4 id="BCNF"><a href="#BCNF" class="headerlink" title="BCNF"></a>BCNF</h4><h5 id="u60C5_u666F-4"><a href="#u60C5_u666F-4" class="headerlink" title="情景"></a>情景</h5><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 假设名字没有重复，即SNo&lt;-&gt;SN</span><br><span class="line"> * 若(SNo, CNo)为主键，则SN部分函数依赖于SNo</span><br><span class="line"> * 若(SN, CNo)为主键，则SNo部分函数依赖于SN</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="title">SNC</span><span class="params">(SNo, SN, CNo, Score)</span></span></span><br><span class="line">转换为BCNF</span><br><span class="line"><span class="function"><span class="title">S1</span><span class="params">(SNo, SN)</span></span></span><br><span class="line"><span class="function"><span class="title">S2</span><span class="params">(SNo, CNo, Score)</span></span></span><br></pre></td></tr></table></figure>
<h5 id="u5B9A_u4E49-3"><a href="#u5B9A_u4E49-3" class="headerlink" title="定义"></a>定义</h5><p>消除主属性对键的依赖关系。</p>
<h4 id="4NF"><a href="#4NF" class="headerlink" title="4NF"></a>4NF</h4><p>暂不考虑</p>
<h4 id="5NF"><a href="#5NF" class="headerlink" title="5NF"></a>5NF</h4><p>暂不考虑</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/14/leetcode/RemoveLinkedListElements/" itemprop="url">
                  Remove Linked List Elements
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-14T09:08:15+08:00" content="2015-05-14">
              2015-05-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/14/leetcode/RemoveLinkedListElements/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/14/leetcode/RemoveLinkedListElements/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>Remove all elements from a linked list of integers that have value val.</p>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Given: <span class="number">1</span> --&gt; <span class="number">2</span> --&gt; <span class="number">6</span> --&gt; <span class="number">3</span> --&gt; <span class="number">4</span> --&gt; <span class="number">5</span> --&gt; <span class="number">6</span>, val = <span class="number">6</span></span><br><span class="line">Return: <span class="number">1</span> --&gt; <span class="number">2</span> --&gt; <span class="number">3</span> --&gt; <span class="number">4</span> --&gt; <span class="number">5</span></span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/14/leetcode/RemoveLinkedListElements/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/14/network/TCP连接与关闭时会出现的各种情况分析/" itemprop="url">
                  TCP连接与关闭时会出现的各种情况分析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-14T07:04:38+08:00" content="2015-05-14">
              2015-05-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/计算机网络/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/14/network/TCP连接与关闭时会出现的各种情况分析/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/14/network/TCP连接与关闭时会出现的各种情况分析/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="u5BA2_u6237_u7AEF-_u670D_u52A1_u5668"><a href="#u5BA2_u6237_u7AEF-_u670D_u52A1_u5668" class="headerlink" title="客户端-服务器"></a>客户端-服务器</h3><h4 id="u6253_u5F00"><a href="#u6253_u5F00" class="headerlink" title="打开"></a>打开</h4><p>tcpdump抓的包：<br><img src="http://i2.buimg.com/2f49b5ab4c08c238.jpg" alt=""><br>wireshark抓的包：<br><img src="http://i3.buimg.com/13cc268f4e1dbacf.jpg" alt=""><br>（从以上tcpdump与wireshark抓的包可以看出，同样的包，不同工具解析出来的序列号等都不一样。）<br>1：客户端—（SYN）—&gt;服务器<br>如图中的红色字1，客户端给服务器发送SYN包，序列号为0<br>2：服务器—（SYN+ACK）—&gt;客户端<br>如图中的红色字2，因为客户端发送的标志位SYN会占用一个序列号，所以ack的值为客户端中的序列号+1，即1 = 0 + 1。同时服务器也给客户端发送一个SYN标志位<br>3：客户端—（ACK）—&gt;服务器<br>如图中的红色字3，客户端接收到服务器的SYN，便给服务器发送一个ACK。因为服务器发送的标志位会占用一个序列号，所以ack的值为服务器中的语+1，即1 = 0 + 1。此时表示ESTABLISHED建立。</p>
<p>异常情况：<br>1：客户端发送完SYN没有收到服务器发送过来的SYN+ACK<br>处理办法：出现超时连接，可能一次，多次或超过次数进入CLOSED状态<br>情景再现：<br>从图中可以知道第一次接连超时是隔1s再发送，以后每次是前面的2倍：<br><img src="http://i2.buimg.com/274fd891901ff63e.jpg" alt=""><br>连接超时最大次数设置：<br><img src="http://i3.buimg.com/cc28b037eff53721.jpg" alt=""><br>2：服务器没有收到客户端的ACK<br>处理办法：会超时重传SYN+ACK，情况类似1.2</p>
<h4 id="u5173_u95ED"><a href="#u5173_u95ED" class="headerlink" title="关闭"></a>关闭</h4><p>正常情况之客户端发起关闭<br><img src="http://i2.buimg.com/6ad39eadc2deb2cc.jpg" alt=""><br>1：客户端—（FIN+ACK）—&gt;服务器<br>如图红色字1，此处的ACK表示以上一次客户端发送数据的序列号进行确认<br>2：服务器—（ACK）—&gt;客户端<br>如图红色字2，因为ACK不会占用1个序列号（SYN，FIN会占用一个），发以红色字体3处的seq并没有加1（从红色字1处的ack=2826，以及红色字3处的seq可推断）<br>3：服务器—（FIN+ACK）—&gt;客户端<br>因为红色字1中发送FIN占用了一个序列号，所以这里红色字3中的ack=红色字1中的seq+1<br>4：客户端—（ACK）—&gt;服务器<br>同里，红色字3中使用FIN占用了一个序列号，所以这里红色字4的ack=红色字3中的seq+1</p>
<p>异常情况<br>1：客户端发送完FIN+ACK后，没有收到服务器的ACK<br>处理办法：类似1.2<br>2：服务器发送的ACK没有到达客户端<br>处理办法：不需要处理，因为客户端还会再重发FIN＋ACK<br>3：客户端处于FIN_WAIT_2，即没有收到服务器传输的数据又没收到服务器的FIN，则经过一些时间后就不等服务器的FIN，直接关闭由内核接管，称之为孤儿连接（有两个变量：孤独连接队列的连接数，孤儿连接在内核的生存时间）<br>4：服务器发送完FIN+ACK后，没有收到客户端的ACK<br>处理办法：类似1.2<br>5：客户端发送的ACK服务器没有收到<br>处理办法：不需要处理，国为服务器会再重发FIN+ACK，另外，此时的客户端发送完ACK后进入了TIME_WAIT，等到TIME_WAIT超时，不管服务器有没有收到ACK，客户端都会CLOSED</p>
<h3 id="u670D_u52A1_u5668-_u670D_u52A1_u5668"><a href="#u670D_u52A1_u5668-_u670D_u52A1_u5668" class="headerlink" title="服务器-服务器"></a>服务器-服务器</h3><h4 id="u6B63_u5E38_u6253_u5F00"><a href="#u6B63_u5E38_u6253_u5F00" class="headerlink" title="正常打开"></a>正常打开</h4><p>注：同是服务器的情形，正常打开是否是和”客户端-服务器”的打开是一样的。</p>
<h4 id="u540C_u65F6_u6253_u5F00"><a href="#u540C_u65F6_u6253_u5F00" class="headerlink" title="同时打开"></a>同时打开</h4><p>1：两端同时打开<br>服务器（客户端）—（SYN）—&gt;客户端（服务器）<br>客户端（服务器）—（SYN）—&gt;服务器（客户端）<br>2：服务器（客户端）—（SYN+ACK）—&gt;客户端（服务器）<br>3：客户端（服务器）—（SYN+ACK）—&gt;服务器（客户端）</p>
<h4 id="u6B63_u5E38_u5173_u95ED1"><a href="#u6B63_u5E38_u5173_u95ED1" class="headerlink" title="正常关闭1"></a>正常关闭1</h4><p>同”客户端-服务器”的关闭是一样的</p>
<h4 id="u6B63_u5E38_u5173_u95ED2"><a href="#u6B63_u5E38_u5173_u95ED2" class="headerlink" title="正常关闭2"></a>正常关闭2</h4><p><img src="http://i2.buimg.com/74adb64fb8063391.jpg" alt=""><br>这种情况下，服务器直接收到带确认信息的结束报文段（而不是先收到确认报文段，再收到结束报文段）<br>1：服务器（客户端）—（FIN+ACK）—&gt;客户端（服务器）<br>此处的ACK表示以上一次客户端（服务器）方发送数据的序列号进行确认。<br>2：客户端（服务器）—（FIN+ACK）—&gt;服务器（客户端）<br>此处的ACK=上一次服务器（客户端）方发送数据的序列+上一次服务器（客户端）主发送FIN占的1位序列号。这样服务器（客户端）接收到这个ACK后就知道，自己之前发送的数据以及发送的FIN标志位，对方都已经收到了。<br>3：服务器（客户端）—（ACK）—&gt;客户端（服务器）<br>同里，红色字2中使用FIN占用了一个序列号，所以这里红色字3的ack=红色字2中的seq+1</p>
<h4 id="u540C_u65F6_u5173_u95ED"><a href="#u540C_u65F6_u5173_u95ED" class="headerlink" title="同时关闭"></a>同时关闭</h4><p>1：两端同时关闭<br>服务器（客户端）—（FIN+ACK）—&gt;客户端（服务器）<br>客户端（服务器）—（FIN+ACK）—&gt;服务器（客户端）<br>2：服务器（客户端）—（ACK）—&gt;客户端（服务器）<br>3：客户端（服务器）—（ACK）—&gt;服务器（客户端）<br>异常情况<br>可以类似按客户端-服务器进行分析</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/14/leetcode/HappyNumber/" itemprop="url">
                  Happy Number
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-14T06:59:21+08:00" content="2015-05-14">
              2015-05-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/leetcode/" itemprop="url" rel="index">
                    <span itemprop="name">leetcode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/14/leetcode/HappyNumber/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/14/leetcode/HappyNumber/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h3 id="u9898_u76EE"><a href="#u9898_u76EE" class="headerlink" title="题目"></a>题目</h3><h4 id="Describe"><a href="#Describe" class="headerlink" title="Describe"></a>Describe</h4><p>Write an algorithm to determine if a number is “happy”.<br>A happy number is a number defined by the following process: Starting with any positive integer, replace the number by the sum of the squares of its digits, and repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1. Those numbers for which this process ends in 1 are happy numbers.</p>
<h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">9</span> is a happy number</span><br><span class="line"></span><br><span class="line"><span class="number">12</span> + <span class="number">92</span> = <span class="number">82</span></span><br><span class="line"><span class="number">82</span> + <span class="number">22</span> = <span class="number">68</span></span><br><span class="line"><span class="number">62</span> + <span class="number">82</span> = <span class="number">100</span></span><br><span class="line"><span class="number">12</span> + <span class="number">02</span> + <span class="number">02</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure>
          <div class="post-more-link text-center">
            <a class="btn" href="/2015/05/14/leetcode/HappyNumber/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/05/13/network/TCP状态转移分析篇/" itemprop="url">
                  TCP状态转移分析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-05-13T23:08:15+08:00" content="2015-05-13">
              2015-05-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/计算机网络/" itemprop="url" rel="index">
                    <span itemprop="name">计算机网络</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/05/13/network/TCP状态转移分析篇/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/05/13/network/TCP状态转移分析篇/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="u5BA2_u6237_u7AEF_u72B6_u6001_u8F6C_u79FB"><a href="#u5BA2_u6237_u7AEF_u72B6_u6001_u8F6C_u79FB" class="headerlink" title="客户端状态转移"></a>客户端状态转移</h3><p><img src="http://i4.buimg.com/adcdf5f87fbcfdc1.jpg" alt=""></p>
<h3 id="u670D_u52A1_u5668_u72B6_u6001_u8F6C_u79FB"><a href="#u670D_u52A1_u5668_u72B6_u6001_u8F6C_u79FB" class="headerlink" title="服务器状态转移"></a>服务器状态转移</h3><p><img src="http://i4.buimg.com/0e117539fd10d877.jpg" alt=""></p>
<h3 id="u65E2_u662F_u5BA2_u6237_u7AEF_u53C8_u662F_u670D_u52A1_u5668_u72B6_u6001_u8F6C_u79FB"><a href="#u65E2_u662F_u5BA2_u6237_u7AEF_u53C8_u662F_u670D_u52A1_u5668_u72B6_u6001_u8F6C_u79FB" class="headerlink" title="既是客户端又是服务器状态转移"></a>既是客户端又是服务器状态转移</h3><p><img src="http://i4.buimg.com/88bcd136c71b9014.jpg" alt=""></p>
<h3 id="u7279_u6B8A_u72B6_u6001_u5206_u6790"><a href="#u7279_u6B8A_u72B6_u6001_u5206_u6790" class="headerlink" title="特殊状态分析"></a>特殊状态分析</h3><h4 id="u534A_u5173_u95ED_u72B6_u6001"><a href="#u534A_u5173_u95ED_u72B6_u6001" class="headerlink" title="半关闭状态"></a>半关闭状态</h4><p>通信的一端可以发送结束报文给对方，告诉对方本端已经完成了数据的发送，但允许接收来自对方的数据直到对方也发送结束报文段以关闭连接。</p>
<h4 id="TIME_WAIT_u72B6_u6001"><a href="#TIME_WAIT_u72B6_u6001" class="headerlink" title="TIME_WAIT状态"></a>TIME_WAIT状态</h4><h5 id="u5B9A_u4E49"><a href="#u5B9A_u4E49" class="headerlink" title="定义"></a>定义</h5><p>客户端连接在收到服务器的结束报文段之后，给服务器发送ACK确认后，并没有直接进入CLOSED状态，而是转移到TIME_WAIT状态。在这个连接状态，客户端需要等待一段长为2MSL的时间，才能完全关闭。</p>
<h4 id="MSL"><a href="#MSL" class="headerlink" title="MSL"></a>MSL</h4><p>Maximum Segment Lifetime：报文段最大生存时间。RFC标准指定的是2分钟，现实中常用的是30秒，1分钟或2分钟。</p>
<h4 id="u4F5C_u7528"><a href="#u4F5C_u7528" class="headerlink" title="作用"></a>作用</h4><p>1：可靠地终止TCP连接。如果服务器没有收到客户端发的ACK，则可以让客户端进行重传。<br>2：保证让迟来的TCP报文段有足够的时间被识别并丢弃。即当过了2MSL后，如果用这个插槽，就不会收到原先属于这个插槽的数据。</p>

          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/headImage.jpg"
               alt="等风来" />
          <p class="site-author-name" itemprop="name">等风来</p>
          <p class="site-description motion-element" itemprop="description">Waiting for wind</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">171</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">32</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jinpingwang" target="_blank" title="GitHub">
                  
                    <i class="fa fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/@349268138Jin" target="_blank" title="Twitter">
                  
                    <i class="fa fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://photo.wangjinping.top" target="_blank" title="Photo">
                  
                    <i class="fa fa-globe"></i>
                  
                  Photo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/1848729614" target="_blank" title="Weibo">
                  
                    <i class="fa fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">等风来</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"wangjinping"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  

</body>
</html>
